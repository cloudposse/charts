apiVersion: v1
kind: Secret
metadata:
  labels:
    app: {{ template "name" . }}
    chart: {{ .Chart.Name }}-{{ .Chart.Version }}
    component: grafana
    heritage: {{ .Release.Service }}
    release: {{ .Release.Name }}
  name: "{{ template "fullname" . }}-grafana"
data:
  user: {{ .Values.grafana.security.user | trim | b64enc | quote }}
  password: {{ .Values.grafana.security.password | trim | b64enc | quote }}
{{if .Values.grafana.auth.github.id }}
  github_client_id: {{ trim  .Values.grafana.auth.github.id | b64enc | quote }}
{{end}}
{{if .Values.grafana.auth.github.secret }}
  github_client_secret: {{ trim  .Values.grafana.auth.github.secret | b64enc | quote }}
{{end}}
{{if .Values.grafana.auth.google.id }}
  google_client_id: {{ trim  .Values.grafana.auth.google.id | b64enc | quote }}
{{end}}
{{if .Values.grafana.auth.google.secret }}
  google_client_secret: {{ trim  .Values.grafana.auth.google.secret | b64enc | quote }}
{{end}}
{{if .Values.grafana.auth.generic.id }}
  generic_client_id: {{ trim  .Values.grafana.auth.generic.id | b64enc | quote }}
{{end}}
{{if .Values.grafana.auth.generic.secret }}
  generic_client_secret: {{ trim  .Values.grafana.auth.generic.secret | b64enc | quote }}
{{end}}